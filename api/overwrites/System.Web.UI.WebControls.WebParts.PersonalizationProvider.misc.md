---
uid: System.Web.UI.WebControls.WebParts.PersonalizationProvider
additional_notes.overrides: *content
---

<p>You can derive from <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider"></xref> and provide implementations for only the abstract methods defined in this class. The abstract methods deal specifically with saving and loading data to a physical data store, and with data store administration. A custom provider must be capable of manipulating personalization information in a manner that distinguishes <xref href="System.Web.UI.WebControls.WebParts.PersonalizationScope.Shared"></xref> data from <xref href="System.Web.UI.WebControls.WebParts.PersonalizationScope.User"></xref> data. Furthermore, a provider must segment personalization data by page as well as by application.  
  
 Implementations of <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider"></xref> are tightly coupled to implementations of <xref href="System.Web.UI.WebControls.WebParts.PersonalizationState"></xref> because some personalization provider methods return instances of <xref href="System.Web.UI.WebControls.WebParts.PersonalizationState"></xref>-derived classes. To ease development of custom providers, the <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider"></xref> base class includes a default implementation of the personalization logic and serialization/deserialization logic that is used directly by the <xref href="System.Web.UI.WebControls.WebParts.WebPartPersonalization"></xref> class. As a result, authoring a custom provider solely for the purpose of working with a different data store only requires implementation of the following abstract methods:  
  
-   <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider.GetCountOfState(System.Web.UI.WebControls.WebParts.PersonalizationScope,System.Web.UI.WebControls.WebParts.PersonalizationStateQuery)"></xref> - This method needs to be able to count the number of rows of personalization data in the database for the supplied query parameters.  
  
-   <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)"></xref> - Given the path and user name, this method loads two binary large objects (BLOBs) from the database: one BLOB for shared data and one for user data. If you supply the user name and path, then you do not need the <xref href="System.Web.UI.WebControls.WebParts.WebPartManager"></xref> control to access the page information that can provide the user name/path information.  
  
-   <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider.ResetPersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String)"></xref> - Given the path and user name, this method deletes the corresponding row in the database. If you supply the user name and path, then you do not need the <xref href="System.Web.UI.WebControls.WebParts.WebPartManager"></xref> control to access the page information that can provide the user name/path information.  
  
-   <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider.SavePersonalizationBlob(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[])"></xref> - Given the path and user name, this method saves the supplied BLOB to the database. If you supply the user name and path, then you do not need the <xref href="System.Web.UI.WebControls.WebParts.WebPartManager"></xref> control to access the page information that can provide the user name/path information.  
  
 In all of these methods, if only a path is supplied, that indicates the shared personalization data for the page is being operated upon. If both a path and a username are passed to a method, then the user personalization data for the page should be acted upon. In the case of <xref href="System.Web.UI.WebControls.WebParts.PersonalizationProvider.LoadPersonalizationBlobs(System.Web.UI.WebControls.WebParts.WebPartManager,System.String,System.String,System.Byte[]@,System.Byte[]@)"></xref>, the shared data for the specified path should always be loaded, and optionally the user personalization data for the path should also be loaded if the username is not `null`.  
  
 All other abstract methods are intended for use only in administrative applications and are not used by the Web Parts infrastructure at run time. For an example of an implementation of a personalization provider, see the <xref href="System.Web.UI.WebControls.WebParts.SqlPersonalizationProvider"></xref> class.</p>


